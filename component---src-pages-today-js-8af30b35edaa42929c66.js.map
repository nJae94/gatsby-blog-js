{"version":3,"sources":["webpack:///./src/pages/today.js"],"names":["data","location","posts","allMarkdownRemark","nodes","console","log","useState","TIL","setTIL","tag","setTag","tags","useMemo","map","post","frontmatter","category","useEffect","filter","title","pathname","split","Wrapper","setTags","fields","slug","key","styled","div","pageQuery"],"mappings":"uPASe,sBAAyB,IAAtBA,EAAqB,EAArBA,KAAMC,EAAe,EAAfA,SAChBC,EAAQF,EAAKG,kBAAkBC,MAErCC,QAAQC,IAAIJ,GAHyB,MAKfK,mBAAS,IAAxBC,EAL8B,KAKzBC,EALyB,OAOfF,mBAAS,OAAxBG,EAP8B,KAOzBC,EAPyB,KAS/BC,EAAOC,mBACX,kBACE,IACEX,EAAMY,KACJ,SAAAC,GAAI,OAC6B,QAA9BA,EAAKC,YAAYC,UACc,UAA9BF,EAAKC,YAAYC,UACa,UAA9BF,EAAKC,YAAYC,WACnBF,EAAKC,YAAYJ,WAGzB,IAsBF,OAnBAM,qBAAU,WACRT,EACU,QAARC,EACIR,EAAMiB,QACJ,SAAAJ,GAAI,MAC4B,QAA9BA,EAAKC,YAAYC,UACa,UAA9BF,EAAKC,YAAYC,UACa,UAA9BF,EAAKC,YAAYC,YAErBf,EAAMiB,QACJ,SAAAJ,GAAI,OAC6B,QAA9BA,EAAKC,YAAYC,UACc,UAA9BF,EAAKC,YAAYC,UACa,UAA9BF,EAAKC,YAAYC,WACnBF,EAAKC,YAAYJ,OAASF,QAGnC,CAACR,EAAOQ,IAGT,kBAAC,IAAD,CAAQT,SAAUA,EAAUmB,MAAOnB,EAASoB,SAASC,MAAM,KAAK,IAC9D,kBAAC,IAAD,CAAKF,MAAM,cAEX,kBAACG,EAAD,KACE,kBAAC,IAAD,CAAKX,KAAMA,EAAMY,QAASb,IACzBH,EAAIM,KAAI,SAAAC,GACP,IAAMK,EAAQL,EAAKC,YAAYI,OAASL,EAAKU,OAAOC,KAEpD,OAAO,kBAAC,IAAD,CAAaC,IAAKP,EAAOA,MAAOA,EAAOL,KAAMA,UAO9D,IAAMQ,EAAUK,IAAOC,IAAV,qEAAGD,CAAH,sEAOAE,EAAS","file":"component---src-pages-today-js-8af30b35edaa42929c66.js","sourcesContent":["import React, { useEffect, useState, useMemo } from \"react\"\r\nimport { graphql } from \"gatsby\"\r\nimport Layout from \"../layout\"\r\nimport SEO from \"../components/seo\"\r\nimport styled from \"styled-components\"\r\nimport MainContent from \"../components/maincontent\"\r\nimport Tag from \"../components/tag\"\r\nimport _ from \"lodash\"\r\n\r\nexport default ({ data, location }) => {\r\n  const posts = data.allMarkdownRemark.nodes\r\n\r\n  console.log(posts)\r\n\r\n  const [TIL, setTIL] = useState([])\r\n\r\n  const [tag, setTag] = useState(\"all\")\r\n\r\n  const tags = useMemo(\r\n    () =>\r\n      _.uniq(\r\n        posts.map(\r\n          post =>\r\n            (post.frontmatter.category === \"TIL\" ||\r\n              post.frontmatter.category === \"front\" ||\r\n              post.frontmatter.category === \"essay\") &&\r\n            post.frontmatter.tags\r\n        )\r\n      ),\r\n    []\r\n  )\r\n\r\n  useEffect(() => {\r\n    setTIL(\r\n      tag === \"all\"\r\n        ? posts.filter(\r\n            post =>\r\n              post.frontmatter.category === \"TIL\" ||\r\n              post.frontmatter.category === \"front\" ||\r\n              post.frontmatter.category === \"essay\"\r\n          )\r\n        : posts.filter(\r\n            post =>\r\n              (post.frontmatter.category === \"TIL\" ||\r\n                post.frontmatter.category === \"front\" ||\r\n                post.frontmatter.category === \"essay\") &&\r\n              post.frontmatter.tags === tag\r\n          )\r\n    )\r\n  }, [posts, tag])\r\n\r\n  return (\r\n    <Layout location={location} title={location.pathname.split(\"/\")[1]}>\r\n      <SEO title=\"TIL posts\" />\r\n      {/* <Tag/> */}\r\n      <Wrapper>\r\n        <Tag tags={tags} setTags={setTag} />\r\n        {TIL.map(post => {\r\n          const title = post.frontmatter.title || post.fields.slug\r\n\r\n          return <MainContent key={title} title={title} post={post} />\r\n        })}\r\n      </Wrapper>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n`\r\n\r\nexport const pageQuery = graphql`\r\n  query {\r\n    site {\r\n      siteMetadata {\r\n        title\r\n      }\r\n    }\r\n    allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }) {\r\n      nodes {\r\n        excerpt\r\n        fields {\r\n          slug\r\n        }\r\n        frontmatter {\r\n          date(formatString: \"MMMM DD, YYYY\")\r\n          title\r\n          description\r\n          category\r\n          tags\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\n"],"sourceRoot":""}